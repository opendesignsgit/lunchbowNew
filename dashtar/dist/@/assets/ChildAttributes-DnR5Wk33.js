import{u as Z,r as f,S as q,j as e,f as l,s as ee,k as se}from"./index-CeVDEEei.js";import{S as te,u as z,j as ae,g as le,h as re,i as ie}from"./Layout-CcMNNaZ4.js";import{u as M}from"./useToggleDrawer-CzZxNYTz.js";import{T as O,D as ne,M as $}from"./DrawerButton-DmwH5vsU.js";import{C as G,S as oe,B as de}from"./BulkActionDrawer-DL-gEJMB.js";import{D as J}from"./DeleteModal-C2V44Xok.js";import{E as ce}from"./EditDeleteButton-o-BiuxpI.js";import{u as me,E as R}from"./index.esm-BcFVggIo.js";import{I as ue}from"./InputArea-B4G6HLhq.js";import{L as U}from"./LabelArea-B-7rwQwm.js";import{S as xe}from"./SwitchToggle-BpQKILyD.js";import{A,u as he}from"./useFilter-Bo7z1Qkl.js";import{a as V,n as E}from"./toast-C-sk6pTy.js";import{u as pe}from"./useTranslationValue-Z9kdRa0m.js";import{L as ge}from"./Loading-ChtgZD95.js";import{N as fe}from"./NotFound-DqH5GUVC.js";import{P as be}from"./PageTitle-BNFwlyPJ.js";import{u as H}from"./useAsync-BXK40Pcd.js";import{A as je}from"./AnimatedContent-DFcCCmNs.js";import"./iconBase-DoKym2qq.js";import"./SelectLanguageTwo-CNfN2jle.js";import"./spinner-CkndCogW.js";import"./index.prod-DwQ_UEEY.js";import"./CouponServices-BoIMl-hX.js";import"./CurrencyServices-_K0iNOM8.js";import"./ProductServices-Du5OybLf.js";import"./index-rlwwEboC.js";import"./ParentCategory-DY3BP5-Z.js";import"./useDisableForDemo-CHynow2B.js";import"./AdminServices-DuO9aYE5.js";import"./Tooltip-Dkk_fvLX.js";const ye=r=>{const p=Z(),{isDrawerOpen:d,closeDrawer:c,setIsUpdate:u,lang:y}=f.useContext(q),[m,n]=f.useState([]),[t,w]=f.useState("en"),[x,i]=f.useState({}),[b,j]=f.useState(!1),[k,g]=f.useState(!1),{setServiceId:T}=M(),{handlerTextTranslateHandler:N}=pe();let B=[];(async()=>{for(let s=0;s<m.length;s++){const o=await N(m[s],t);B=[...B,{name:{[t]:m[s],...o}}]}})();const{handleSubmit:S,register:v,setValue:h,clearErrors:C,formState:{errors:P}}=me(),D=async({title:s,name:o,option:a})=>{try{if(g(!0),!r&&m.length===0){V("Minimum one value is required for add attribute!");return}const I=await N(s,t,x==null?void 0:x.title),Y=await N(o,t,x==null?void 0:x.name),_={title:{...I,[t]:s},name:{...Y,[t]:o},variants:B,option:a,type:"attribute",lang:t};if(r){const L=await A.updateAttributes(r,_);u(!0),g(!1),E(L.message),c(),T()}else{const L=await A.addAttribute(_);u(!0),g(!1),E(L.message),c(),T()}}catch(I){V(I?I.response.data.message:I.message),c(),g(!1),T()}},F=async({name:s})=>{try{if(g(!0),r){const o=await A.updateChildAttributes({ids:p.pathname.split("/")[2],id:r},{name:{[t]:s},status:b?"show":"hide"});u(!0),g(!1),E(o.message),c()}else{const o=await A.addChildAttribute(p.pathname.split("/")[2],{name:{[t]:s},status:b?"show":"hide"});u(!0),g(!1),E(o.message),c()}}catch(o){V(o?o.response.data.message:o.message),c(),g(!1),T()}},Q=s=>{w(s),Object.keys(x).length>0&&(h("title",x.title[s||"en"]),h("name",x.name[s||"en"]))},W=s=>{n([...m.filter((o,a)=>a!==s)])},X=s=>{s.preventDefault(),s.target.value!==""&&(n([...m,s.target.value]),s.target.value="")};return f.useEffect(()=>{if(!d){i({}),h("title"),h("name"),h("option"),C("title"),C("name"),C("option"),n([]),w(y),h("language",t);return}p.pathname==="/attributes"&&r?(async()=>{var s,o;try{const a=await A.getAttributeById(r);a&&(i(a),h("title",a.title[t||"en"]),h("name",a.name[t||"en"]),h("option",a.option))}catch(a){V(((o=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:o.message)||(a==null?void 0:a.message))}})():p.pathname===`/attributes/${p.pathname.split("/")[2]}`&&(async()=>{var s,o;try{const a=await A.getChildAttributeById({id:p.pathname.split("/")[2],ids:r});a&&(h("name",a.name[t||"en"]),j(a.status==="show"))}catch(a){V(((o=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:o.message)||(a==null?void 0:a.message))}})()},[C,r,d,h,p,t,y]),{handleSubmit:S,onSubmits:F,onSubmit:D,register:v,errors:P,variants:m,setVariants:n,addVariant:X,removeVariant:W,published:b,setPublished:j,isSubmitting:k,handleSelectLanguage:Q}},K=({id:r})=>{const{handleSubmit:p,onSubmits:d,register:c,errors:u,published:y,isSubmitting:m,setPublished:n,handleSelectLanguage:t}=ye(r);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:r?e.jsx(O,{register:c,handleSelectLanguage:t,title:"Add/Update Attribute Valu",description:"Add your attribute values and necessary information from here"}):e.jsx(O,{register:c,handleSelectLanguage:t,title:"Add/Update Attribute Values",description:"Add your attribute values and necessary information from here"})}),e.jsx(te,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:p(d),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 items-center",children:[e.jsx(U,{label:"Display Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(ue,{required:!0,register:c,label:"Display Name",name:"name",type:"text",placeholder:"Color or Size or Dimension or Material or Fabric"}),e.jsx(R,{errorName:u.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6 items-center",children:[e.jsx(U,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(xe,{handleProcess:n,processOption:y}),e.jsx(R,{errorName:u.published})]})]})]}),e.jsx(ne,{id:r,title:"Attribute",isSubmitting:m})]})})]})},we=({att:r,loading:p,isCheck:d,setIsCheck:c,childAttributes:u})=>{const{title:y,serviceId:m,handleModalOpen:n,handleUpdate:t}=M(),{showingTranslateValue:w}=z(),x=i=>{const{id:b,checked:j}=i.target;c([...d,b]),j||c(d.filter(k=>k!==b))};return e.jsxs(e.Fragment,{children:[d.length<1&&e.jsx(J,{id:m,title:y}),d.length<2&&e.jsx($,{children:e.jsx(K,{id:m})}),e.jsx(l.TableBody,{children:u==null?void 0:u.map((i,b)=>{var j;return e.jsxs(l.TableRow,{children:[e.jsx(l.TableCell,{children:e.jsx(G,{type:"checkbox",name:"child-attribute",id:i._id,handleClick:x,isChecked:d==null?void 0:d.includes(i._id)})}),e.jsx(l.TableCell,{className:"font-semibold uppercase text-xs",children:(j=i==null?void 0:i._id)==null?void 0:j.substring(20,24)}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:w(i==null?void 0:i.name)}),e.jsx(l.TableCell,{className:"font-medium text-sm",children:r==null?void 0:r.option}),e.jsx(l.TableCell,{className:"text-center",children:e.jsx(oe,{id:i._id,status:i.status})}),e.jsx(l.TableCell,{children:e.jsx(ce,{id:i._id,isCheck:d,setIsCheck:c,handleUpdate:t,handleModalOpen:n,title:w(i.name)})})]},b+1)})})]})},Ze=()=>{let{id:r}=ee();const{handleDeleteMany:p,allId:d,serviceId:c,handleUpdateMany:u}=M(),{toggleDrawer:y,lang:m}=f.useContext(q),{data:n,loading:t,error:w}=H(()=>A.getAttributeById(r)),{showingTranslateValue:x}=z(),{data:i}=H(()=>A.getAllAttributes({type:"attribute",option:"Dropdown",option1:"Radio"})),{totalResults:b,resultsPerPage:j,dataTable:k,serviceData:g,handleChangePage:T}=he(n==null?void 0:n.variants),[N,B]=f.useState(!1),[S,v]=f.useState([]),[h,C]=f.useState([]),P=()=>{var D;B(!N),v((D=n==null?void 0:n.variants)==null?void 0:D.map(F=>F._id)),N&&v([])};return f.useEffect(()=>{const D=i==null?void 0:i.filter(F=>F._id!==r);C(D)},[i,r]),e.jsxs(e.Fragment,{children:[e.jsx(be,{children:"Attributes Values"}),e.jsx(J,{ids:d,setIsCheck:v,title:"Selected Attribute Value(s)"}),e.jsx(de,{attributes:h,ids:d,title:"Attribute Value(s)",childId:r}),e.jsx($,{children:e.jsx(K,{id:c})}),e.jsxs(je,{children:[e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(se,{className:"text-blue-700",to:"/attributes",children:"Attributes"})}),e.jsxs("span",{className:"flex items-center font-serif dark:text-gray-400",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(ae,{})," "]}),e.jsx("li",{className:"text-sm pl-1 font-semibold dark:text-gray-400",children:!t&&x(n==null?void 0:n.title)})]})]})}),e.jsx(l.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsxs(l.CardBody,{className:"py-3 grid gap-4 justify-end lg:gap-4 xl:gap-4 md:flex xl:flex",children:[e.jsx("div",{className:"flex justify-end items-end",children:e.jsxs(l.Button,{onClick:y,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(le,{})}),"Add Value"]})}),e.jsx("div",{className:"w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(l.Button,{disabled:S.length<1,onClick:()=>u(S),className:"w-full rounded-md h-12",children:[e.jsx(re,{}),"Bulk Action"]})}),e.jsxs(l.Button,{disabled:S.length<1,onClick:()=>p(S),className:"rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx(ie,{})}),"Delete"]})]})})]}),t?e.jsx(ge,{loading:t}):w?e.jsx("span",{className:"text-center mx-auto text-red-500",children:w}):(g==null?void 0:g.length)!==0?e.jsxs(l.TableContainer,{className:"mb-8",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:e.jsx(G,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:P,isChecked:N})}),e.jsx(l.TableCell,{children:"Id"}),e.jsx(l.TableCell,{children:"Name"}),e.jsx(l.TableCell,{children:"Type"}),e.jsx(l.TableCell,{className:"text-center",children:"Status"}),e.jsx(l.TableCell,{className:"text-right",children:"Actions"})]})}),e.jsx(we,{att:n,lang:m,loading:t,isCheck:S,setIsCheck:v,childAttributes:k})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:b,resultsPerPage:j,onChange:T,label:"Table navigation"})})]}):e.jsx(fe,{title:"Sorry, There are no attributes right now."})]})};export{Ze as default};

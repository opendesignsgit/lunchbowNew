import{e as y,i as C,r as c,j as e,f as s}from"./index-CeVDEEei.js";import{g as w,h as M,i as S}from"./Layout-CcMNNaZ4.js";import{P as D}from"./PageTitle-BNFwlyPJ.js";import{u as N}from"./useAsync-BXK40Pcd.js";import"./iconBase-DoKym2qq.js";const p={getAllHolidays:async()=>(await y.get("/holidays/get-all-holidays")).data||[],addHoliday:async a=>y.post("/holidays/add-holiday",a),updateHoliday:async(a,r)=>y.put(`/holidays/update-holiday/${a}`,r),deleteHoliday:async a=>y.delete(`/holidays/delete-holiday/${a}`)},T=({isOpen:a,onClose:r,holiday:n})=>{const{t:d}=C(),[u,i]=c.useState({date:"",name:""}),[x,m]=c.useState(!1);c.useEffect(()=>{if(n){const l=new Date(n.date).toISOString().split("T")[0];i({date:l,name:n.name})}else i({date:"",name:""})},[n]);const j=l=>{const{name:o,value:f}=l.target;i(g=>({...g,[o]:f}))},h=async l=>{l.preventDefault(),m(!0);try{let o;n?o=await p.updateHoliday(n._id,u):o=await p.addHoliday(u),o.success&&r()}catch(o){console.error("Error saving holiday:",o)}finally{m(!1)}};return e.jsxs(s.Modal,{isOpen:a,onClose:r,children:[e.jsx(s.ModalHeader,{children:d(n?"Update Holiday":"Add Holiday")}),e.jsxs("form",{onSubmit:h,children:[e.jsx(s.ModalBody,{children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(s.Label,{children:[e.jsxs("span",{children:[d("Date")," *"]}),e.jsx(s.Input,{className:"mt-1",type:"date",name:"date",value:u.date,onChange:j,required:!0})]}),e.jsxs(s.Label,{children:[e.jsxs("span",{children:[d("Holiday Name")," *"]}),e.jsx(s.Input,{className:"mt-1",name:"name",value:u.name,onChange:j,placeholder:"e.g. New Year's Day",required:!0})]})]})}),e.jsxs(s.ModalFooter,{children:[e.jsx(s.Button,{layout:"outline",type:"button",onClick:r,disabled:x,children:d("Cancel")}),e.jsx(s.Button,{type:"submit",disabled:x,children:x?e.jsx("span",{children:"Processing..."}):d(n?"Update":"Save")})]})]})]})},F=()=>{const{t:a}=C(),{data:r=[],loading:n,reload:d}=N(p.getAllHolidays),[u,i]=c.useState(!1),[x,m]=c.useState(null),[j,h]=c.useState(!1),[l,o]=c.useState(null),f=()=>{m(null),i(!0)},g=t=>{m(t),i(!0)},b=t=>{o(t),h(!0)},H=async()=>{try{await p.deleteHoliday(l._id),d(),h(!1)}catch(t){console.error("Error deleting holiday:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:a("Holidays")}),e.jsxs(s.Modal,{isOpen:j,onClose:()=>h(!1),children:[e.jsx(s.ModalHeader,{children:a("Confirm Deletion")}),e.jsxs(s.ModalBody,{children:[a("Are you sure you want to delete the holiday")," ",e.jsx("strong",{children:l==null?void 0:l.name})," (",l==null?void 0:l.date,")?"," ",a("This action cannot be undone."),"."]}),e.jsxs(s.ModalFooter,{children:[e.jsx(s.Button,{layout:"outline",onClick:()=>h(!1),children:a("Cancel")}),e.jsx(s.Button,{layout:"danger",onClick:H,children:a("Delete")})]})]}),e.jsx(T,{isOpen:u,onClose:()=>{i(!1),d()},holiday:x}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden mb-5",children:e.jsx(s.CardBody,{children:e.jsx("div",{className:"flex justify-end",children:e.jsx(s.Button,{onClick:f,className:"rounded-md",iconLeft:w,children:a("Add Holiday")})})})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden",children:e.jsx(s.CardBody,{children:n?e.jsx("p",{children:a("Loading holidays...")}):r.length===0?e.jsx("p",{children:a("No holidays found. Add your first holiday.")}):e.jsx(s.TableContainer,{children:e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:a("Date")}),e.jsx(s.TableCell,{children:a("Name")}),e.jsx(s.TableCell,{children:a("Actions")})]})}),e.jsx(s.TableBody,{children:r.map(t=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:new Date(t.date).toLocaleDateString()}),e.jsx(s.TableCell,{children:t.name}),e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(s.Button,{layout:"link",size:"small",onClick:()=>g(t),children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx(s.Button,{layout:"link",size:"small",onClick:()=>b(t),children:e.jsx(S,{className:"w-5 h-5 text-red-500"})})]})})]},t._id))})]})})})})]})};export{F as default};

import{A as zt,P as Zt,c as Gt}from"./ProductServices-Du5OybLf.js";import{d as J,u as Ht}from"./Layout-CcMNNaZ4.js";import{c as pt,g as mt,e as i,r as n,u as Xt,S as kt,L as Kt}from"./index-CeVDEEei.js";import{u as Qt}from"./useDisableForDemo-CHynow2B.js";import{C as Wt}from"./CouponServices-BoIMl-hX.js";import{C as te}from"./CurrencyServices-_K0iNOM8.js";import{a as y,n as x}from"./toast-C-sk6pTy.js";var yt={exports:{}};(function(s,c){(function(f,w){s.exports=w()})(pt,function(){return function(f,w,D){w.prototype.isBetween=function($,R,b,A){var O=D($),g=D(R),N=(A=A||"()")[0]==="(",j=A[1]===")";return(N?this.isAfter(O,b):!this.isBefore(O,b))&&(j?this.isBefore(g,b):!this.isAfter(g,b))||(N?this.isBefore(O,b):!this.isAfter(O,b))&&(j?this.isAfter(g,b):!this.isBefore(g,b))}}})})(yt);var ee=yt.exports;const se=mt(ee);var ft={exports:{}};(function(s,c){(function(f,w){s.exports=w()})(pt,function(){return function(f,w,D){w.prototype.isToday=function(){var $="YYYY-MM-DD",R=D();return this.format($)===R.format($)}}})})(ft);var ae=ft.exports;const ne=mt(ae),oe={getAllAttributes:async({type:s,option:c,option1:f})=>i.get(`/attributes?type=${s}&option=${c}&option1=${f}`),getShowingAttributes:async s=>i.get("/attributes/show",s),addAttribute:async s=>i.post("/attributes/add",s),addChildAttribute:async(s,c)=>i.put(`/attributes/add/child/${s}`,c),addAllAttributes:async s=>i.post("/attributes/add/all",s),getAttributeById:async s=>i.get(`/attributes/${s}`),getChildAttributeById:async({id:s,ids:c})=>i.get(`/attributes/child/${s}/${c}`),updateAttributes:async(s,c)=>i.put(`/attributes/${s}`,c),updateChildAttributes:async({id:s,ids:c},f)=>i.put(`/attributes/update/child/${c}/${s}`,f),updateStatus:async(s,c)=>i.put(`/attributes/status/${s}`,c),updateChildStatus:async(s,c)=>i.put(`/attributes/status/child/${s}`,c),deleteAttribute:async(s,c)=>i.delete(`/attributes/${s}`,c),deleteChildAttribute:async({id:s,ids:c},f)=>i.put(`/attributes/delete/child/${c}/${s}`,f),updateManyAttribute:async s=>i.patch("/attributes/update/many",s),updateManyChildAttribute:async s=>i.patch("/attributes/update/child/many",s),deleteManyAttribute:async s=>i.patch("/attributes/delete/many",s),deleteManyChildAttribute:async s=>i.patch("/attributes/delete/child/many",s)},re={getAllCategory:async()=>i.get("/category"),getAllCategories:async()=>i.get("/category/all"),getCategoryById:async s=>i.get(`/category/${s}`),addCategory:async s=>i.post("/category/add",s),addAllCategory:async s=>i.post("/category/add/all",s),updateCategory:async(s,c)=>i.put(`/category/${s}`,c),updateStatus:async(s,c)=>i.put(`/category/status/${s}`,c),deleteCategory:async(s,c)=>i.delete(`/category/${s}`,c),updateManyCategory:async s=>i.patch("/category/update/many",s),deleteManyCategory:async s=>i.patch("/category/delete/many",s)},ie={getAllCustomers:async({searchText:s=""})=>i.get(`/customer?searchText=${s}`),addAllCustomers:async s=>i.post("/customer/add/all",s),createCustomer:async s=>i.post("/customer/create",s),filterCustomer:async s=>i.post(`/customer/filter/${s}`),getCustomerById:async s=>i.get(`/customer/${s}`),updateCustomer:async(s,c)=>i.put(`/customer/${s}`,c),deleteCustomer:async s=>i.delete(`/customer/${s}`)},ue={type:"object",properties:{_id:{type:"string"},name:{type:"object"},description:{type:"object"},icon:{type:"string"},status:{type:"string"}},required:["name"]},de={type:"object",properties:{status:{type:"string"},title:{type:"object"},name:{type:"object"},variants:{type:"array"},option:{type:"string"},type:{type:"string"}},required:["name","title"]},ce={type:"object",properties:{title:{type:"object"},couponCode:{type:"string"},endTime:{type:"string"},discountPercentage:{type:"number"},minimumAmount:{type:"number"},productType:{type:"string"},logo:{type:"string"},discountType:{type:"object"},status:{type:"string"}},required:["title","couponCode","endTime","status"]},le={type:"object",properties:{name:{type:"string"},email:{type:"string"}},required:["name","email"]},Ne=s=>{const c=new zt({allErrors:!0}),[f,w]=n.useState(""),[D,$]=n.useState(""),[R,b]=n.useState(""),[A,O]=n.useState(""),[g,N]=n.useState(""),[j,gt]=n.useState(""),[L,W]=n.useState(""),[T,tt]=n.useState(""),[_,et]=n.useState(""),[Ct,St]=n.useState(""),[U,bt]=n.useState(""),[Y,ht]=n.useState(""),[wt,At]=n.useState([]),[Dt,Lt]=n.useState([]),[Tt,Pt]=n.useState([]),[z,Rt]=n.useState(""),[Z,Ot]=n.useState(""),[E,xt]=n.useState(""),[G,$t]=n.useState(1),[jt,st]=n.useState([]),[Ft,Bt]=n.useState(""),[Nt,_t]=n.useState(""),[Ut,Mt]=n.useState(""),[h,H]=n.useState([]),[It,v]=n.useState(""),[Jt,q]=n.useState(!1),[X,Et]=n.useState(""),[k]=n.useState([]),at=n.useRef(""),nt=n.useRef(""),ot=n.useRef(""),rt=n.useRef(""),it=n.useRef(""),K=n.useRef(""),ut=n.useRef(""),dt=n.useRef(""),ct=n.useRef(""),vt=n.useRef(""),lt=n.useRef("");J.extend(se),J.extend(ne);const p=Xt(),{lang:M,setIsUpdate:F,setLoading:C}=n.useContext(kt),{globalSetting:B}=Ht(),{handleDisableForDemo:Q}=Qt(),P=n.useMemo(()=>{const r=new Date;r.setDate(r.getDate()-E);let e=s==null?void 0:s.map(t=>{const u=new Date(t==null?void 0:t.updatedAt).toLocaleString("en-US",{timeZone:B==null?void 0:B.default_time_zone});return{...t,updatedDate:u==="Invalid Date"?"":u}});if(p.pathname==="/dashboard"){const t=e==null?void 0:e.filter(m=>m.status==="Pending");At(t);const u=e==null?void 0:e.filter(m=>m.status==="Processing");Lt(u);const a=e==null?void 0:e.filter(m=>m.status==="Delivered");Pt(a);const l=e==null?void 0:e.filter(m=>J(m.createdAt).isToday()),S=l==null?void 0:l.reduce((m,I)=>m+I.total,0);Bt(S);const o=e==null?void 0:e.filter(m=>J(m.createdAt).isBetween(new Date().setDate(new Date().getDate()-30),new Date)),d=o==null?void 0:o.reduce((m,I)=>m+I.total,0);_t(d);const Yt=e==null?void 0:e.reduce((m,I)=>m+I.total,0);Mt(Yt)}return f&&(e=e.filter(t=>t.parent===f)),D==="Low"&&(e=e.sort((t,u)=>t.price<u.price&&-1)),D==="High"&&(e=e.sort((t,u)=>t.price>u.price&&-1)),R&&(e=e.filter(t=>{var u;return(u=t==null?void 0:t.title)==null?void 0:u.toLowerCase().includes(R.toLowerCase())})),T&&(e=e.filter(t=>{var u,a,l;return((a=(u=t==null?void 0:t.title[M])==null?void 0:u.toLowerCase())==null?void 0:a.includes(T==null?void 0:T.toLowerCase()))||((l=t==null?void 0:t.attribute)==null?void 0:l.toLowerCase().includes(T==null?void 0:T.toLowerCase()))})),L&&(e=e.filter(t=>{var u,a,l;return((a=(u=t==null?void 0:t.name[M])==null?void 0:u.toLowerCase())==null?void 0:a.includes(L==null?void 0:L.toLowerCase()))||((l=t==null?void 0:t.category)==null?void 0:l.toLowerCase().includes(L==null?void 0:L.toLowerCase()))})),Z&&(e=e.filter(t=>t.role===Z)),A&&(e=e.filter(t=>{var u,a,l;return((u=t==null?void 0:t.name[M])==null?void 0:u.toLowerCase().includes(A.toLowerCase()))||((a=t==null?void 0:t.phone)==null?void 0:a.toLowerCase().includes(A.toLowerCase()))||((l=t==null?void 0:t.email)==null?void 0:l.toLowerCase().includes(A.toLowerCase()))})),g&&(e=e==null?void 0:e.filter(t=>{var u,a,l;return((a=(u=t==null?void 0:t.title[M])==null?void 0:u.toLowerCase())==null?void 0:a.includes(g==null?void 0:g.toLowerCase()))||((l=t==null?void 0:t.couponCode)==null?void 0:l.toLowerCase().includes(g==null?void 0:g.toLowerCase()))})),z&&(e=e.filter(t=>t.status===z)),j&&(e=e.filter(t=>t.contact.toLowerCase().includes(j.toLowerCase()))),E&&(e=e.filter(t=>J(t.createdAt).isBetween(r,new Date))),_&&(e=e.filter(t=>{var u,a;return((u=t==null?void 0:t.name)==null?void 0:u.toLowerCase().includes(_.toLowerCase()))||((a=t==null?void 0:t.iso_code)==null?void 0:a.toLowerCase().includes(_.toLowerCase()))})),X&&(e=e.filter(t=>t==null?void 0:t.name.toLowerCase().includes(X.toLowerCase()))),U&&(e=e.filter(t=>t.name.toLowerCase().includes(U.toLowerCase())||t.iso_code.toLowerCase().includes(U.toLowerCase())||t.language_code.toLowerCase().includes(U.toLowerCase()))),Y&&(e=e.filter(t=>t.iso_code.toLowerCase().includes(Y.toLowerCase()))),e},[E,s,p.pathname,f,D,R,T,L,Z,A,g,z,j,_,X,U,Y,K,B==null?void 0:B.default_time_zone,M]),V=20,qt=P==null?void 0:P.length,Vt=r=>{$t(r)};return n.useEffect(()=>{st(P==null?void 0:P.slice((G-1)*V,G*V))},[P,G,V]),{userRef:ot,searchRef:nt,couponRef:rt,orderRef:it,categoryRef:K,attributeRef:ut,pending:wt,processing:Dt,delivered:Tt,todayOrder:Ft,monthlyOrder:Nt,totalOrder:Ut,setFilter:w,setSortedField:$,setStatus:Rt,setRole:Ot,time:E,zone:Ct,setTime:xt,taxRef:vt,setZone:St,filename:It,countryRef:dt,dataTable:jt,serviceData:P,country:_,setSearchText:b,setCountry:et,isDisabled:Jt,languageRef:ct,currencyRef:at,shippingRef:lt,setSearchUser:O,setDataTable:st,setCategoryType:W,handleChangePage:Vt,totalResults:qt,resultsPerPage:V,handleOnDrop:r=>{for(let e=0;e<r.length;e++)k.push(r[e].data)},setSearchCoupon:N,setAttributeTitle:tt,handleSelectFile:r=>{var u;if(r.preventDefault(),Q())return;const e=new FileReader,t=(u=r.target)==null?void 0:u.files[0];t&&t.type==="application/json"?(v(t==null?void 0:t.name),q(!0),console.log("if"),e.readAsText(t,"UTF-8"),e.onload=a=>{let l=JSON.parse(a.target.result),S=[];p.pathname==="/categories"&&(S=l.map(o=>({_id:o._id,id:o.id,status:o.status,name:o.name,description:o.description,parentName:o.parentName,parentId:o.parentId,icon:o.icon}))),p.pathname==="/attributes"&&(S=l.map(o=>({_id:o._id,status:o.status,title:o.title,name:o.name,variants:o.variants,option:o.option,type:o.type}))),p.pathname==="/coupons"&&(S=l.map(o=>({title:o.title,couponCode:o.couponCode,endTime:o.endTime,discountPercentage:o.discountPercentage,minimumAmount:o.minimumAmount,productType:o.productType,logo:o.logo,discountType:o.discountType,status:o.status}))),p.pathname==="/customers"&&(S=l.map(o=>({name:o.name,email:o.email,password:o.password,phone:o.phone}))),H(S)}):t&&t.type==="text/csv"?(v(t==null?void 0:t.name),q(!0),console.log("else if"),e.onload=async a=>{const l=a.target.result,S=await Gt().fromString(l);let o=[];p.pathname==="/categories"&&(o=S.map(d=>({_id:d._id,id:d.id,status:d.status,name:JSON.parse(d.name),description:JSON.parse(d.description),parentName:d.parentName,parentId:d.parentId,icon:d.icon}))),p.pathname==="/attributes"&&(o=S.map(d=>({status:d.status,title:JSON.parse(d.title),name:JSON.parse(d.name),variants:JSON.parse(d.variants),option:d.option,type:d.type}))),p.pathname==="/coupons"&&(o=S.map(d=>({title:JSON.parse(d.title),couponCode:d.couponCode,endTime:d.endTime,discountPercentage:d.discountPercentage?JSON.parse(d.discountPercentage):0,minimumAmount:d.minimumAmount?JSON.parse(d.minimumAmount):0,productType:d.productType,logo:d.logo,status:d.status}))),p.pathname==="/customers"&&(o=S.map(d=>({name:d.name,email:d.email,password:d.password,phone:d.phone}))),H(o)},e.readAsText(t)):(v(t==null?void 0:t.name),q(!0),y("Unsupported file type!"))},handleSubmitUser:r=>{r.preventDefault(),O(ot.current.value)},handleSubmitForAll:r=>{r.preventDefault(),b(nt.current.value)},handleSubmitCoupon:r=>{r.preventDefault(),N(rt.current.value)},handleSubmitOrder:r=>{r.preventDefault(),gt(it.current.value)},handleSubmitCategory:r=>{r.preventDefault(),W(K.current.value)},handleSubmitAttribute:r=>{r.preventDefault(),tt(ut.current.value)},handleUploadProducts:()=>{if(k.length<1)y("Please upload/select csv file first!");else{if(Q())return;Zt.addAllProducts(k).then(r=>{x(r.message)}).catch(r=>y(r.message))}},handleSubmitCountry:r=>{r.preventDefault(),et(dt.current.value)},handleSubmitCurrency:r=>{r.preventDefault(),ht(at.current.value)},handleSubmitShipping:r=>{r.preventDefault(),Et(lt.current.value)},handleSubmitLanguage:r=>{r.preventDefault(),bt(ct.current.value)},handleUploadMultiple:r=>{if(!Q())if(h.length>1){if(p.pathname==="/categories"){C(!0);let e=h.map(a=>c.validate(ue,a));const t=a=>a===!0;e.every(t)?re.addAllCategory(h).then(a=>{C(!1),F(!0),x(a.message)}).catch(a=>{C(!1),y(a?a.response.data.message:a.message)}):y("Please enter valid data!")}if(p.pathname==="/customers"){C(!0);let e=h.map(a=>c.validate(le,a));const t=a=>a===!0;e.every(t)?ie.addAllCustomers(h).then(a=>{C(!1),F(!0),x(a.message)}).catch(a=>{C(!1),y(a?a.response.data.message:a.message)}):y("Please enter valid data!")}if(p.pathname==="/coupons"){C(!0);let e=h.map(a=>c.validate(ce,a));const t=a=>a===!0;e.every(t)?Wt.addAllCoupon(h).then(a=>{C(!1),F(!0),x(a.message)}).catch(a=>{C(!1),y(a?a.response.data.message:a.message)}):y("Please enter valid data!")}if(p.pathname==="/attributes"){C(!0);let e=h.map(a=>c.validate(de,a));const t=a=>a===!0;e.every(t)?oe.addAllAttributes(h).then(a=>{C(!1),F(!0),x(a.message)}).catch(a=>{C(!1),y(a?a.response.data.message:a.message)}):y("Please enter valid data!")}p.pathname==="/languages"&&Kt.addAllLanguage(h).then(e=>{F(!0),x(e.message)}).catch(e=>y(e?e.response.data.message:e.message)),p.pathname==="/currencies"&&te.addAllCurrency(h).then(e=>{F(!0),x(e.message)}).catch(e=>y(e?e.response.data.message:e.message))}else y("Please select a valid .JSON/.CSV/.XLS file first!")},handleRemoveSelectFile:r=>{v(""),H([]),setTimeout(()=>q(!1),1e3)}}};export{oe as A,re as C,ne as a,ie as b,se as i,Ne as u};
